<div class="grid" >
    <div class="col-12" >
        <div *ngIf="loading" >
              <div class="d-flex justify-content-center">
                <div class="spinner-grow text-danger" role="status">
                    <span class="sr-only"></span>
                  </div>
                  <div class="spinner-grow text-warning" role="status">
                    <span class="sr-only"></span>
                  </div>
                  <div class="spinner-grow text-info" role="status">
                    <span class="sr-only"></span>
                  </div>
                <div class="text-primary" role="status">
                  <span class="sr-only">Loading...</span>
                </div>
              </div>
              
        </div>
        
    </div>
</div>

<div class="grid" *ngIf="user" >
    <div class="col mt-2" >
        <p-card header="List of Users" >
            <p-toolbar styleClass="p-mb-4">
                <ng-template pTemplate="left">
                    <button pButton pRipple label="New" 
                            icon="pi pi-plus" 
                            class="p-button-success p-mr-2"
                            routerLink="/usuarios/user-create">
                    </button>
                </ng-template>
            </p-toolbar>
        
        
                <p-table [value]="user">
                    <ng-template pTemplate="header">
                        <tr>
                            <th>Name</th>
                            <th>Last Name</th>
                            <th>Email</th>
                            <th>Status</th>
                            <th>Rol</th>
                            <th>Actions</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-user>
                        <tr>
                            <td>{{user.nombre}}</td>
                            <td>{{user.apellido}}</td>
                            <td>{{user.correo}}</td>
                            <td>
                                <button pButton 
                                        class="p-button-text p-button-plain p-button-succes"
                                        label="{{user.estado}}"
                                        [ngStyle]="{color:'var(--green-400)'}" >
                                        
                                </button>
                            </td>
                            <td>

                                <table> 
                                    <div *ngIf="user.tiene_muchos; else vacio">
                                        <tr *ngFor="let item of user.tiene_muchos">
                                            <div>
                                                <td >
                                                    {{item.pertenece_a.nombre }}
                                                </td>
                                            </div>
                                        </tr>
                                        <td>
                                            <button pButton pRipple type="button" 
                                                    class="p-button-rounded p-button-rounded"
                                                    label="Rol"
                                                    icon="pi pi-plus"
                                                    type="button"
                                                    [routerLink]="['/usuarios/rol', user.id]">
                                            </button>
                                        </td>
                                    </div>
                                    <td>
                                        <ng-template #vacio>
                                            <button pButton pRipple type="button" 
                                                    class="p-button-rounded p-button-rounded"
                                                    label="Rol"
                                                    icon="pi pi-plus"
                                                    type="button"
                                                    [routerLink]="['/usuarios/rol', user.id]">
                                            </button>
                                        </ng-template>
                                    </td>
                                </table>
                            </td>
                            
        
                            <td>
                                <button pButton pRipple icon="pi pi-pencil" 
                                        class="p-button-rounded p-button-success p-mr-2"
                                        style="margin-right: 5px;"
                                        type="button"
                                        [routerLink]="['/usuarios/user-update', user.id]" 
                                        >
                                </button>
                                <button pButton pRipple icon="pi pi-trash" 
                                        class="p-button-rounded p-button-warning"
                                        type="button"
                                        [routerLink]="['/usuarios/user-delete', user.id]" 
                                        >
                                </button>
                            </td>
                            
                        </tr>
                        
                    </ng-template>
                </p-table>
        

        </p-card>
    </div>   
</div>
    

<router-outlet></router-outlet>

